<!doctype html>
<html lang="zh-Hant">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ÈÄÅ‰∏äÁ•ùÁ¶è</title>

<!-- Â≠óÈ´î -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand:wght@400&family=Sacramento:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --brand-bg:#c9daf8;
  --title:#A68A7C;
  --ink:#0f172a; --accent:#A68A7C; --rim:#E4E4E4; --soft:#F5F1EC;

  --panel-grad-from:#a8c8f2;
  --panel-grad-to:#bcd6f8;

  --panel-maxw:1200px; --card-maxw:1000px;
  --radius-xl:16px; --radius-md:12px;
  --shadow-1:0 10px 26px rgba(0,0,0,.10);
  --shadow-2:0 2px 0 rgba(0,0,0,.15), 0 2px 8px rgba(0,0,0,.06);

  --footer-gap:48px;
  --btn-w:220px; --btn-h:50px;
}

*{ box-sizing:border-box; }
html,body{
  height:100%; margin:0; overflow:hidden;
  color:var(--ink); background:var(--brand-bg);
  font-family:"Patrick Hand","Noto Sans TC",system-ui,-apple-system,sans-serif;
}

.bg-photo{
  position:fixed; inset:0; z-index:0; width:100%; height:100%;
  object-fit:cover; opacity:.45; pointer-events:none;
  filter:brightness(0.65);
}

.panel{
  position:relative; z-index:1;
  max-width:var(--panel-maxw);
  height:calc(100vh - (70px + var(--footer-gap)));
  margin:26px auto;
  background:linear-gradient(135deg, var(--panel-grad-from), var(--panel-grad-to));
  border:1px solid var(--rim); border-radius:var(--radius-xl);
  box-shadow:var(--shadow-1);
  display:flex; flex-direction:column; overflow:hidden;
}

.titlebar{ padding:10px 16px 6px; flex:0 0 auto; }
h2{ margin:0 0 6px; text-align:center; font-family:"Sacramento",cursive;
  font-weight:700; font-size:2.8rem; color:var(--title);
}

.stage{
  flex:1 1 auto; padding:14px 22px;
  display:grid; grid-template-columns: 1fr 2fr 1fr;
  gap:16px; overflow:hidden;
}

/* Â∑¶ÂÅ¥ÁØ©ÈÅ∏Âô® */
.filter-panel{
  background:#fff8dc;
  border:1px solid rgba(0,0,0,.08);
  border-radius:var(--radius-md);
  padding:12px; box-shadow:var(--shadow-2);
}
.filter-panel h3{ margin:0 0 10px; font-size:16px; text-align:center; }
.filter-panel button{
  display:block; width:100%; margin:6px 0; padding:8px;
  border:1px solid var(--rim); border-radius:8px;
  background:#fff; cursor:pointer; font-weight:bold;
}

/* ‰∏≠ÈñìÁ•ùÁ¶èÁâÜ */
.wall{
  background:#fff8dc;
  border:1px solid rgba(0,0,0,.08);
  border-radius:var(--radius-md);
  padding:16px; overflow:auto;
  display:grid; grid-template-columns:repeat(auto-fill, minmax(220px,1fr));
  gap:16px;
}
.card{
  position:relative;
  background:#fffef4;
  border:2px solid #e0c080;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.15);
  padding:10px;
  display:flex; flex-direction:column;
  height:180px; cursor:pointer;
}
.card::before{
  content:"";
  position:absolute; top:-18px; left:50%;
  width:6px; height:22px; background:#b91c1c;
  transform:translateX(-50%); border-radius:3px;
}
.card::after{
  content:"‚¨§";
  position:absolute; top:-28px; left:50%;
  transform:translateX(-50%);
  font-size:16px; color:#991b1b;
}
.card .author{ font-weight:bold; margin-bottom:4px; color:#7b4a12; }
.card .content{
  flex:1; overflow:hidden;
  display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical;
  font-size:14px; line-height:1.5;
}
.card .date{ font-size:12px; text-align:right; color:#666; }
.card .sign{ text-align:center; margin-top:6px; }
.card .sign img{ max-width:60px; max-height:30px; border:1px solid #e0c080; background:#fffef4; }

/* Modal ÊîæÂ§ß */
.modal{
  position:fixed; inset:0; background:rgba(0,0,0,.5);
  display:none; justify-content:center; align-items:center; z-index:999;
}
.modal.show{ display:flex; }
.modal .card-big{
  background:#fffef4; border:2px solid #e0c080;
  border-radius:12px; padding:20px; max-width:520px; width:90%;
}
.card-big .author{ font-weight:bold; font-size:20px; margin-bottom:10px; color:#7b4a12; }
.card-big .content{ font-size:16px; line-height:1.6; margin-bottom:12px; white-space:pre-wrap; }
.card-big .date{ font-size:13px; text-align:right; color:#555; }
.card-big .sign{text-align:center;margin:12px 0;}
.card-big .sign img{max-width:120px;max-height:60px;border:1px solid #e0c080;background:#fffef4;}
.card-big .actions{text-align:center;margin-top:12px;}
.card-big .actions button{
  padding:6px 14px; border-radius:6px; border:1px solid #aaa;
  background:#fff; cursor:pointer;
}

/* Âè≥ÂÅ¥ËÉåÊùø */
.side-panel{
  background:#fff8dc;
  border:1px solid rgba(0,0,0,.08);
  border-radius:var(--radius-md);
  padding:16px; box-shadow:var(--shadow-2);
  display:flex; flex-direction:column; align-items:center; gap:12px;
}
.side-panel .bride{ font-size:18px; font-weight:bold; color:#6b5e52; }
.side-panel .sign-box{
  width:140px; height:70px;
  border:1px solid #e0c080; border-radius:8px;
  background:#fffef4;
  display:flex; align-items:center; justify-content:center;
}
.side-panel .sign-box img{ max-width:100%; max-height:100%; }

/* ÈÄÅÂá∫Á•ùÁ¶è */
.footer-actions{ flex:0 0 auto; display:flex; justify-content:center; padding:14px 0 16px; }
.primary{
  min-width:var(--btn-w); height:var(--btn-h);
  border:1px solid var(--rim); border-radius:var(--radius-md);
  background:#fff; font-weight:700; cursor:pointer;
}
</style>

<body>
  <img class="bg-photo" src="./assets/wishing.png" alt="">

  <div class="panel">
    <div class="titlebar">
      <h2>ÈÄÅ‰∏äÁ•ùÁ¶è</h2>
      <!-- ‰øùÁïôÂ∑•ÂÖ∑Âàó / ÁãÄÊÖãÂàó -->
      <div class="bar">
        <div class="bar-inner">
          <div class="toolbar">
            <!-- Â∑•ÂÖ∑ÂàóÊåâÈàïÂéüÂ∞Å‰∏çÂãï -->
          </div>
          <p id="status">Â∑≤Â∞±Á∑í</p>
        </div>
      </div>
    </div>

    <div class="stage">
      <!-- Â∑¶ÂÅ¥ ÁØ©ÈÅ∏Âô® -->
      <div class="filter-panel">
        <h3>ÁØ©ÈÅ∏</h3>
        <button data-role="all">ÂÖ®ÈÉ®</button>
        <button data-role="male">Áî∑Êñπ</button>
        <button data-role="female">Â•≥Êñπ</button>
      </div>

      <!-- ‰∏≠Èñì Á•ùÁ¶èÁâÜ -->
      <div class="wall" id="wall"></div>

      <!-- Âè≥ÂÅ¥ ËÉåÊùø -->
      <div class="side-panel">
        <div class="bride" id="brideLabel">Êñ∞‰∫∫Ôºö‚Äî</div>
        <div class="sign-box"><img id="signThumb" alt=""></div>
      </div>
    </div>

    <div class="footer-actions">
      <button id="btnSubmit" class="primary">ÈÄÅÂá∫Á•ùÁ¶è</button>
    </div>
  </div>

  <footer>¬© Copyright 2025 MY‚Äòs System</footer>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="card-big">
      <div class="author" id="mAuthor"></div>
      <div class="content" id="mContent"></div>
      <div class="date" id="mDate"></div>
      <div class="sign" id="mSign"></div>
      <div class="actions" id="mActions"></div>
    </div>
  </div>

<script>
const wall=document.getElementById('wall');
const modal=document.getElementById('modal');
const mAuthor=document.getElementById('mAuthor');
const mContent=document.getElementById('mContent');
const mDate=document.getElementById('mDate');
const mSign=document.getElementById('mSign');
const mActions=document.getElementById('mActions');

const currentUser="Â∞èÊòé"; // ÂÅáË®≠ÁôªÂÖ•ËÄÖ
const blessings=[];

// Êñ∞Â¢ûÁ•ùÁ¶èÂà∞ÁâÜ
function addBlessing({author,content,date,editable,signURL}){
  blessings.push({author,content,date,editable,signURL});
  renderWall();
}

// Ê∏≤ÊüìÁâÜ
function renderWall(){
  wall.innerHTML="";
  blessings.forEach((b,i)=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <div class="author">${b.author}</div>
      <div class="content">${b.content}</div>
      <div class="date">${b.date}</div>
      <div class="sign">${b.signURL?`<img src="${b.signURL}">`:""}</div>
    `;
    card.addEventListener('click',()=>{
      mAuthor.textContent=b.author;
      mContent.textContent=b.content;
      mDate.textContent=b.date;
      mSign.innerHTML=b.signURL?`<img src="${b.signURL}">`:"";
      mActions.innerHTML="";
      if(b.editable){ 
        const btn=document.createElement("button");
        btn.textContent="Á∑®ËºØ ‚úèÔ∏è";
        btn.onclick=()=>editBlessing(i);
        mActions.appendChild(btn);
      }
      modal.classList.add('show');
    });
    wall.appendChild(card);
  });
}

// Á∑®ËºØÁ•ùÁ¶è
function editBlessing(idx){
  const newText=prompt("‰øÆÊîπÁ•ùÁ¶èÔºö",blessings[idx].content);
  if(newText){
    blessings[idx].content=newText;
    renderWall();
    modal.classList.remove('show');
  }
}

// ÈªûÊìä modal ÈóúÈñâ
modal.addEventListener('click',e=>{ if(e.target===modal) modal.classList.remove('show'); });

// ÂÅáË≥áÊñô
addBlessing({author:"Â∞èÊòé",content:"ÊÅ≠ÂñúÁôæÂπ¥Â•ΩÂêàÔºåÊ∞∏ÈÅ†Âπ∏Á¶èÔºÅüíù",date:"2025-09-27",editable:true,signURL:"./assets/sign1.png"});
addBlessing({author:"Â∞èÁæé",content:"Á•ù‰Ω†ÂÄëÁôΩÈ†≠ÂÅïËÄÅÔºåÊó©ÁîüË≤¥Â≠êÔºÅüéâ",date:"2025-09-26",editable:false,signURL:""});

// ÈÄÅÂá∫ ‚Üí Ëá™ÂãïÊñ∞Â¢û
document.getElementById('btnSubmit').addEventListener('click',()=>{
  const content=prompt("Ë´ãËº∏ÂÖ•Á•ùÁ¶èÂÖßÂÆπÔºö");
  if(!content) return;
  const date=new Date().toISOString().slice(0,10);
  const signURL=document.getElementById('signThumb').src||"";
  addBlessing({author:currentUser,content,date,editable:true,signURL});
});
</script>
</body>
</html>
